---
import BaseLayout from "../base/BaseLayout.astro";
import Container from "../../components/base/Container.astro";

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  canonical?: string;
  publishDate?: Date;
  author?: string;
  tags?: string[];
  class?: string;
}

const {
  title = "Blog Post",
  description,
  image,
  canonical,
  publishDate,
  author,
  tags = [],
  class: className = "",
} = Astro.props;

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  }).format(date);
};
---

<BaseLayout
  title={title}
  description={description}
  image={image}
  canonical={canonical}
>
  <Container class={`py-8 md:py-12 max-w-4xl ${className}`}>
    <article class="prose prose-lg dark:prose-invert max-w-none">
      <header class="mb-8 text-center">
        <h1
          class="mb-4 text-4xl font-bold text-gray-900 md:text-5xl dark:text-white"
        >
          {title}
        </h1>

        {
          description && (
            <p class="mb-6 text-xl text-gray-600 dark:text-gray-300">
              {description}
            </p>
          )
        }

        <div
          class="flex items-center justify-center space-x-4 text-sm text-gray-500 dark:text-gray-400"
        >
          {
            publishDate && (
              <time datetime={publishDate.toISOString()}>
                {formatDate(publishDate)}
              </time>
            )
          }

          {author && <span>by {author}</span>}
        </div>

        {
          tags.length > 0 && (
            <div class="mt-4 flex flex-wrap justify-center gap-2">
              {tags.map((tag) => (
                <span class="rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                  {tag}
                </span>
              ))}
            </div>
          )
        }
      </header>

      <div class="content">
        <slot />
      </div>
    </article>
  </Container>
</BaseLayout>

<style>
  @reference "tailwindcss";

  .content :global(h2) {
    @apply mt-8 mb-4 text-2xl font-bold text-gray-900 dark:text-white;
  }

  .content :global(h3) {
    @apply mt-6 mb-3 text-xl font-semibold text-gray-900 dark:text-white;
  }

  .content :global(p) {
    @apply mb-4 leading-relaxed text-gray-700 dark:text-gray-300;
  }

  .content :global(ul),
  .content :global(ol) {
    @apply mb-4 pl-6;
  }

  .content :global(li) {
    @apply mb-1 text-gray-700 dark:text-gray-300;
  }

  .content :global(blockquote) {
    @apply my-6 border-l-4 border-blue-500 pl-4 text-gray-600 italic dark:text-gray-400;
  }

  .content :global(code) {
    @apply rounded bg-gray-100 px-2 py-1 text-sm dark:bg-gray-800;
  }

  .content :global(pre) {
    @apply mb-4 overflow-x-auto rounded-lg bg-gray-100 p-4 dark:bg-gray-800;
  }
</style>
